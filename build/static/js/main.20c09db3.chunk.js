(this.webpackJsonpfullstackopen=this.webpackJsonpfullstackopen||[]).push([[0],{15:function(e,t,n){e.exports=n(42)},23:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(14),o=n.n(i),c=(n(20),n(21),n(22),n(23),n(4)),u=function(e){var t=e.filterName,n=e.handleFilter;return r.a.createElement("p",null,"filter shown with",r.a.createElement("input",{type:"text",value:t,onChange:n}))},l=function(e){var t=e.addPerson,n=e.newName,a=e.newNumber,i=e.handleChangeName,o=e.handleChangeNum;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,r.a.createElement("label",null,"name:",r.a.createElement("input",{type:"text",value:n,onChange:i,required:!0}))),r.a.createElement("div",null,r.a.createElement("label",null,"number:",r.a.createElement("input",{type:"number",value:a,onChange:o,required:!0}))),r.a.createElement("button",{type:"submit"},"add"))},d=function(e){var t=e.filteredPersons,n=e.deletePerson;return r.a.createElement(r.a.Fragment,null,0===t.length&&r.a.createElement("p",null,"Add names first"),r.a.createElement("table",null,r.a.createElement("tbody",null,t.length>0&&t.map((function(e,t){return e.id&&r.a.createElement("tr",{key:"".concat(e,"-").concat(t)},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.number),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return n({id:e.id,name:e.name})}},"delete")))})))))},m=n(3),s=n.n(m),f="https://pbookfso.herokuapp.com/api/persons",p=function(){return s.a.get(f).then((function(e){return e.data}))},h=function(e){return s.a.post(f,e).then((function(e){return e.data}))},b=function(e,t){return s.a.put("".concat(f,"/").concat(e),t).then((function(e){return e.data}))},E=function(e){return s.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},g=n(2),w=n.n(g),O=function(e){return g.store.addNotification({title:"Successfully Added",message:"".concat(e," was added"),type:"success",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:3e3}})},v=function(e){return g.store.addNotification({title:"Successfully Updated",message:"".concat(e," was updated"),type:"info",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:3e3}})},y=function(e){return g.store.addNotification({title:"Successfully Deleted",message:"".concat(e," was deleted"),type:"danger",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:3e3}})},N=function(e){return g.store.addNotification({message:"Information of ".concat(e," has already been removed from server"),type:"danger",container:"top-center",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:3e3}})},C=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)(""),m=Object(c.a)(o,2),s=m[0],f=m[1],g=Object(a.useState)(""),C=Object(c.a)(g,2),j=C[0],k=C[1],I=Object(a.useState)(""),S=Object(c.a)(I,2),P=S[0],L=S[1];Object(a.useEffect)((function(){p().then((function(e){i(e)}))}),[]);var x=""===P?n:n&&n.filter((function(e){return e.name.toLowerCase().includes(P.toLowerCase())}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,null),r.a.createElement("section",null,r.a.createElement("h2",null,"Phonebook~"),r.a.createElement(u,{filterName:P,handleFilter:function(e){L(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("h2",null,"Add a new~"),r.a.createElement(l,{addPerson:function(e){e.preventDefault();var t,a={name:(t=s,t.toLowerCase().split(" ").map((function(e){return e.replace(e[0],e[0].toUpperCase())})).join(" ")),number:j},r=n.length>0?n.findIndex((function(e){return JSON.stringify(e.name).toLowerCase()===JSON.stringify(a.name).toLowerCase()})):-1;if(r>=0){var o=n[r].id;window.confirm("".concat(s," is already added to phonebook, replace the new number with old one?"))?b(o,a).then((function(e){n.splice(r,1,e),i(n),v(s),f(""),k("")})).catch((function(e){N(s),f(""),k("")})):(f(""),k(""))}else h(a).then((function(e){i(n.concat(e)),O(a.name),f(""),k("")}))},newName:s,newNumber:j,handleChangeName:function(e){f(e.target.value)},handleChangeNum:function(e){k(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("h2",null,"Names~"),r.a.createElement(d,{filteredPersons:x,deletePerson:function(e){window.confirm("Delete ".concat(e.name," ?"))&&(E(e.id).then((function(t){i(n.map((function(n){return n.id!==e.id?n:t})).filter((function(e){return 0!==Object.keys(e).length})))})),y(e.name))}})))};o.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.20c09db3.chunk.js.map